<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistics</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
</head>
<body>
    <nav class="navbar is-primary">
        <div class="navbar-brand">
            <a class="navbar-item" href="{% url 'landing_page' %}">Home</a>
            <a class="navbar-item" href="{% url 'entry_list' %}">Entries</a>
            <a class="navbar-item" href="{% url 'advice_list' %}">Advices</a>
            <a class="navbar-item" href="{% url 'statistics' %}">Statistics</a>
        </div>
    </nav>

    <section class="section">
        <div class="container">
            <h1 class="title">Statistics</h1>
            <div class="content">
                <h2>Mood Statistics</h2>
                <ul>
                    <li>Average Mood: {{ avg_mood|floatformat:2 }}</li>
                    <li>Minimum Mood: {{ min_mood }}</li>
                    <li>Maximum Mood: {{ max_mood }}</li>
                    <li>Total Entries: {{ total_entries }}</li>
                </ul>
            </div>

            <div class="content">
                <h2>Advice Feedback Statistics</h2>
                <ul>
                    <li>Average Feedback Score: {{ feedback_stats.avg_score|floatformat:2 }}</li>
                    <li>Total Feedbacks: {{ feedback_stats.total_feedbacks }}</li>
                    <li>Followed Feedbacks: {{ feedback_stats.followed_feedbacks }}</li>
                </ul>
            </div>
        <div class="content">
            <h2>Advice Leaderboard</h2>
            <table class="table is-striped is-fullwidth">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Advice</th>
                        <th>Average Score</th>
                        <th>Feedback Count</th>
                    </tr>
                </thead>
                <tbody>
                    {% for advice in advices %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ advice.advice }}</td>
                        <td>{{ advice.avg_score|floatformat:2 }}</td>
                        <td>{{ advice.feedback_count }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        </div>
    </section>
</body>
</html>

